(function(t){function e(e){for(var n,r,o=e[0],l=e[1],d=e[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(m.length)m.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=s(t);return a(e)}function s(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id="4678"},"4f32":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAAAeCAYAAABqiF+EAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMTowMjowMyAxNTo0MDozNAdOq38AAAxdSURBVHhe7ZwLkBxFGcd7dnb3uDuScJAQIEQDkvAoeYmAkZLjZfDFo0AC8lJQeRQvBbWIRDACFsVDCxBRlIgFKAQMZSmRGMjeJRrBRCySCHgQwAC55G6THOGR3OV2x9+/t3czezt7t5ci4UjNr+pLd3/f11/3zM709HTPxcTExMTExMTEbF08lw4Z8vn8R0mmIymrMOaJRCLxY5cfEOofTHJToVTGWuKc4fJbHfqlYzjY87yHkfsK2qEBfTuQ5HrkPeQSztNq6fuSbJ97uEklrrYFz9zcu9NR/7D5mOoEQeBxgmeRlqCcQz7lXAYE32Nd1TLQr3QuWx2a13GtLfQkaHHqIQN9u8z1TefpGKeuINkx9/5ktiWwsrplhlMPORIuHRJwTr/CKPZ5l39B55iy+ngP+eLIPRCL8T0Fme3KijWV5LxCKWYAqj69g0RiZmDMy5zPZUHOPOLUQ46KA6DDSWQC2THIdlaJGlmLvFh8NOHjI3uT3R2pkw7ySBdS8qsVYo1EnuciHkX6Hun+pFNIv+Hs1xJTj8iaYMS5m7oXKU/dZurOs4YQ6HX8Y0n3IB1ulcaswvefLl8CnxGIzstOSNQN1rNx48bOdDrdRrvvOJ1F7SBr0O9AuhTV9wuWqvQia5CX6IvSqnCc6s94pAlJSteHDUgH0kas9VbjoG4jyVHIifTtAunonwaAxco7NLC06pjccewvJeUliK6LEsTTdTAB/Wj86gvamlhM3/7n8hbqp5B9ye6KpK0SiP0S8qLJL6hPZTecyY3W6Odyj3ePPnaZc9kEAdJ06nokSz4SbL3I42SvJm0vaCvBpinDPORwF35A8P2tq67635Wuq6urifwKp1uP6CaqCXzvtsGA/JFOXQLdmch/nUuYLqT0BFNdRMfSWzD3D349uVzuL6Sap1pQh6cfNUMdncdnEPv0CoPuS8hCJO/c+wU3nb8/ILoBLOTPceZ+we+bzv94p5LuJBsEyI9FHkTedeZBQb3SqE/Rp3wdsqZgLQe9HXCSHS1XFqdCfmfL07ayozRS43wvd8D5rqjgGmk16mrU0F03GntxRC6BX5ZEfjmkAZGfvbOwaWT4JHfh8ypXg7YnUcdOF8g/i/9hlBVP5VPJP6o88eaTb0bKRogoqFd1pMamac7vXLF4rHoSqc3Xsak/OoGfoTyXvB0B8esh0aj3rsp9GIbsHPJ9m+RQ2tWNEx6p9TL2unz6oex8U0dPwJOJ9SeV6dcpJI9it78f9m6SVUjZSAyyq1+KZW9UfDtJDiRWO3F0s9+DNGHf2dnVN/WxBDfpJalU6in8w7/FucS4n7QJWYxeT2zp9duoLzp+9bsWHiSWfQrTxlRi2Tyh9Hu0I+HzncH3Yn91y2lcBQ9R1nE93DvyqPJFACqPIJgdiUiXkxyClE1NKDdgu1k+gvwbyCecuQSmvn4/caZIsDcirzjfHkSrF2Wgm2mDAfmLnbpf8Ks6UlOe7/RqTy+WZcdaBNsj8hPkp5Dopq0Kdp3Hn9oKQP52px/0i+Krr766XW9v76XUy6kSacaZwv3Xk/NCsqXHcxT4aEp3n+oIylOcyUI5/KJ4rFNXgO1U5ya/c6Qje0FBY3WPIbtZ582E+nonUizNGMY5dTSrMruk32oZTycqfz8CjFcgQb7qRYhNcyUL+XudugJsw52b/B5w6kjUnnOV781OXQb6MZg1LRBdKjtTVfDp76LWjSu95rdVwV68ePqd14bBdzhiL0SwKwSkm736QT29mKkPbU4V1r3gVAOC+zjVEdS7w6ktlDf7oib9gVNJVzHIDRZitLlYy0g2ayEjqpJ97EfBYyFsqzoFwK+mxw4dP5Tk8kLJsie6+/sK+ps4QD02xQjkLsqRo+sgqfXxWKtfzcc+CKr+HjCYtt7vfkUx4LSwBp7RP5zHPfmNn+b3vw3RHPvaCLkcmYTohbcclOGR+hanrgCzVigs+P3aqSvAvH3By/pFjtSY9GL6XMFr8FD3yy5UJNhrGanDb/kVYC+O1HpvqAnct8f//Ryp7cssadRI/R+nGhDcP6I6gnpbaqSumDoOFsLsQpxnChFrA/+1yFkuxAe3Tk1fruJuPMDldXH/sUbRy5q4g/wOLh+zjcA1sRKZyG/bjFyD/AyZHiG/QWYjG/DXdXAfF/am1TEKNY3UbW1tddhnIc8ik526AsL0O1Kj2xvZ4OwrkR2daUDwnWoDA/mqTwts8UgdAvcPxUg9WGjzfNe82v+6dIMaqSdMmNCd8LwTEp2tRyYSic3aJqVttXkPd1dxefAKYtX8IkY9rawUX/DO50COdvktQXFpS6samv8PCH07mj7a80o+vBRll9vQ7UMsu/w1EPhp82FsoWTCGzo2LrG0PqwNoQHBd5LLiqglyc0lvIwYbmNroSXnIvY9y/7DiRnPD2FHAg7+Vi4yu/nRl1Tn/EMC0zuXK2sYno/0jjz6dGcqgxjbk2idUnmtQZ5NG420cRblfUm/JRu6FdimkZ2OLty5qlBHI8lk/Is7YC+Tv4V0IbH+jX0M5S9iOhNpdj63kjyH3T418FmOj3YSl6CzU6Ao8LsQv18oj6/614q8hES9vGmXcT/kCOpoXVovTScS/88yEutO1Jcqj0kX1VzkDZmk64OPaJdTN0hxzX8qsW5UnljXof+h02uNWrFek0m6PmhX+AD87U2Jv3wmEqu0a0q8y7Db0Rv7cdiesoY+4Be1Tr0PonVqu8tK/jmSfyF918z7Yy6xZipDG/rdPq38AOja1fKh9hQaaFe/yUHEKQx4BNoLpYV85LKaSGUzXyt90JJtedOpKyBMxfSDVMtykWCreUsV34dctTLQX+PsA37QRP41p+t3+oGLpg03IuvlXyv4r0OucGEslOuRB5CadiaL4K+19DvJlrbAFy1alEL3c9kKXrWBfxY514UpgS48/aj65MMWnn6c7dTSn4SsdKZBQ92/ulCKtdCpa4Y6a5DSxqEdqdGnkdvI6juC27na7bJKBe2zG5N+3VWBZ0aZpPdYrqlZI0QFxEogN5D9GDKdeLNpVPPmX8neF+407fAVXwD7hThXkhxRKJXxe9p5FLu+TbCjGOhC0B2sUbMLu51z4XMR7R1DH2ejq7reXkR9R47Hdx+KOo6KnVXQyKSdSY0Uc/C1T6q+0KbmtseR3QvR8mTkdySIpmR6eiqWdugqoE/6LuKzSPHbj6hNGE2htByqG/hJYlWMoPRHo63eVdZj/w7n5i1nKoP2dsNmPwOWP7560lgo6xo6BvtBpKNRVS6zVYE6cxC7VU4bXyWJ+n3D6PfUcWl3dwnyVNRxxcTExMTExMTExMTExMTE9EvbrKgVjqHNh7HPW4AP7NuPLUoww69rb93DBIUlS0tH665mVUabQgVWzBplls3Rkpoxyx+uN9mnh5s3MyON+/ov0VQ/ueTfPrvRvJ7Z3WRnFf/kizYy25nsk2PMOupE4Gdbb7L2Ior15qIGYtmP8S0r5o0yq1vHms6/DTPtf9+kpw917Zlx5u2QTu1k6UMQaGPG4ndmbrDHFVxnf8dkU+N5ZsaMgl19zS4YY/tehHyqo+XgZGempm/SP6xskxd1Ys2o03Kp/A3pznn2T5dS7ZmPJ73c9KSfeNA6gJ9u+JE/Il34c7OGYSnfvDfFTyemuqV7k/DM7ibfYz+l9NN1zX594lI/aCh9a+6vNrcm88lT/R7ve05Vhmfyh/lechoXrP1o3ve9Sb6/bqKfrNPfAFr8dH5aMp8/Pen1/jKZ3HiXWbTIrlkns5kLcinvpOSGHv1XERa/OzE1mTMnJ7Mt33Yqre9O9L3gYuNNszuJQZAfZyZPtrudCdNwctJ0n+f7Ke2mWvxk+o4g4X2Og9Nfw2yzbJsXdU/uFX7yIBfk9lTZS3k5rgBtZixU2fF2bmRzYSdr5BfWGS9R55mgnasx+pvgIP8Etk3fqARe3viRGyeWIG+eZ8Cdnzbd9gLycvlVxvdO8DzzEetQ4J3e9d1cuMESYi81uxbieZ7fSy+Kf/RcwAt6ers77qVz2mQpYLeGN43cfUkYfybBwn+aRfWa/yo/ZkihKcSqzC5l04+u+U1lc87wY1ksX1Bvls7YtCOXp+ymIlYfMIqG6iQ6MmckO1uuSmZb7fccFWi6kW+r01TIaYx5Y85OZVMgxVMbaktTk2J7Yh1TkyjfAL8ismvqUqwXPqZi22FdsDRtuhbsaNuLiakgP6sunZ23X9mFGDMEMOb/syPo/1xXCOUAAAAASUVORK5CYII="},"55a6":function(t,e,a){"use strict";a("a712")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,i=a("2b0e"),s=a("2f62"),r=a("bfa9"),o=a("5f5b"),l=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],u={name:"App"},m=u,h=(a("034f"),a("2877")),p=Object(h["a"])(m,d,c,!1,null,null,null),f=p.exports,b=(a("ab8b"),a("2dd8"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-navbar",{attrs:{sticky:"",type:"dark",variant:"dark"}},[a("b-navbar-brand",{attrs:{href:"#"}},[t._v("CC Portal")]),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("em",[t._v(t._s(t.frasUsername))])]},proxy:!0}])},[a("b-dropdown-item",{attrs:{to:"/portal/profile"}},[t._v("Profile")]),a("b-dropdown-item",{attrs:{to:"/portal/settings"}},[t._v("Settings")]),a("b-dropdown-item",{attrs:{href:"#"}},[t._v("Sign Out")])],1)],1)],1),a("div",{staticClass:"cc-sidebar"},[a("b-nav",{attrs:{vertical:""}},[a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/cc-records"}},[t._v("CC Records")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/wards"}},[t._v("Patients")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/families/dashboard"}},[t._v("Families")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/admins"}},[t._v("Admins")])],1)],1),a("div",{staticClass:"cc-content"},[t.activeUserLoaded?a("router-view"):t._e()],1)],1)}),g=[],v=a("f121"),y=a.n(v),_=a("72bf"),C={name:"CCPortal",components:{},data:function(){return{frasUsername:y.a.FRAS_USERNAME,activeUser:null,institution:null,activeUserLoaded:!1}},computed:{activeInstitutionId:function(){return null===this.activeUser?"":this.activeUser.institution_id}},created:function(){var t=this;this.getActiveUserFromDb((function(e){t.$store.commit("setActiveUser",e),t.activeUserLoaded=!0,t.getInstitutionFromDb((function(e){t.$store.commit("setInstitution",e)}))}))},methods:{getActiveUserFromDb:function(t){var e=this,a=new XMLHttpRequest,n={frasUsername:this.frasUsername},i=_.stringify(n),s=y.a.API_LOCATION+"admin?"+i;a.open("GET",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;e.activeUser=JSON.parse(this.responseText).data,t(e.activeUser)}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(r){alert(r)}},getInstitutionFromDb:function(t){var e=this,a=new XMLHttpRequest,n=y.a.API_LOCATION+"institution/"+this.activeUser.institution_id;a.open("GET",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;e.institution=JSON.parse(this.responseText).data,t(e.institution)}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}}}},w=C,I=(a("55a6"),Object(h["a"])(w,b,g,!1,null,null,null)),T=I.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("h2",[t._v("Dashboard")])]),a("b-row",{staticClass:"ml-2"},[a("b-alert",{attrs:{variant:"success",show:t.dismissCountDown,dismissible:""},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" # of Scan Records Today: "),a("b",[t._v(t._s(t.numTodayRecords))])])],1),a("b-card",{staticClass:"h-100"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{xl:"8",lg:"10"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Select A Date Range","label-for":"sort-by-select","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-datepicker",{staticClass:"ml-2",attrs:{id:"datepicker-start",placeholder:"Choose a Start Date","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"en"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("p",{staticClass:"ml-2"},[t._v("to")]),a("b-form-datepicker",{staticClass:"ml-2",attrs:{id:"datepicker-end",placeholder:"Choose a End Date","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"en"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("b-button",{staticClass:"ml-2",attrs:{variant:"primary",disabled:!t.hasDateRanges},on:{click:t.onApplyDateRangeFilter}},[t._v("Filter")])],1)],1)],1)],1),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Group","label-for":"group-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"group-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.wardGroupFilter,callback:function(e){t.wardGroupFilter=e},expression:"wardGroupFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Temp Threshold","label-for":"temp-threshold-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-form-checkbox",{model:{value:t.enableTempThrdFilter,callback:function(e){t.enableTempThrdFilter=e},expression:"enableTempThrdFilter"}})],1),a("b-form-input",{attrs:{type:"number",step:"0.1",id:"temp-threshold-filter-input",placeholder:"99.2"},model:{value:t.tempThrdFilter,callback:function(e){t.tempThrdFilter=e},expression:"tempThrdFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Include Expired","label-for":"temp-threshold-filter-input","label-cols-sm":"8","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-checkbox",{attrs:{id:"include-expired-filter-input"},model:{value:t.includeExpiredFilter,callback:function(e){t.includeExpiredFilter=e},expression:"includeExpiredFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"5",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"success"},on:{click:t.onRefresh}},[t._v("Refresh")]),t._e(),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteEvents}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"ccRecordTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"cc-record-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"filter-function":t.filterFunction},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"cc-record-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},S=[],A=(a("caad"),a("d81d"),a("b0c0"),a("2532"),a("b85c")),D=a("72bf"),k=a("c1df"),F="MM/DD/YYYY",M="YYYY-MM-DD",O="hh:mm A",R={name:"CCRecords",data:function(){return{instId:"",currentPage:1,perPage:20,ccRecords:[],fields:["date","employee","group","temperature","phone_number","check_in"],items:[],selectedItems:[],startDate:"",endDate:"",wardGroupFilter:"",tempThrdFilter:"99.2",enableTempThrdFilter:!1,includeExpiredFilter:!1,filterOn:["group","temperature"],numTodayRecords:0,dismissSecs:5,dismissCountDown:0}},mounted:function(){this.startDate=k().format(M),this.endDate=k().format(M);var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id);var e=this;this.getCCRecordsFromDb((function(t){e.showAlert(),e.numTodayRecords=t.length}))},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},disableCheckout:function(){return!0},numRows:function(){return this.items.length},filter:function(){return this.wardGroupFilter+" "+this.tempThrdFilter},hasDateRanges:function(){return this.startDate.length>0&&this.endDate.length>0}},methods:{countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},mapCCRecordToItem:function(t){if(null===t.mt)return{_id:t._id,date:"",has_expired:t.has_expired,employee:"",group:"",temperature:t.temperature,phone_number:"",check_in:""};var e=k(t.mt.check_in_event.time);return{_id:t._id,date:e.format(F),has_expired:t.has_expired,employee:t.mt.info.name,group:t.mt.info.group,temperature:t.temperature,phone_number:t.mt.info.phone_num,check_in:e.format(O)}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onRefresh:function(){this.getCCRecordsFromDb(null)},onCheckOutEvents:function(){},onDeleteEvents:function(){var t,e=Object(A["a"])(this.selectedItems);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.deleteCCRecordFromDb(a)}}catch(n){e.e(n)}finally{e.f()}this.getCCRecordsFromDb(null)},onClearSelect:function(){this.selectedItems=[],this.$refs.ccRecordTable.clearSelected()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},onApplyDateRangeFilter:function(){this.currentPage=1,this.onClearSelect(),this.getCCRecordsFromDb(null)},filterFunction:function(t){var e=!1;this.includeExpiredFilter||(e=t.has_expired);var a=!0;this.enableTempThrdFilter&&(a=!1,this.tempThrdFilter.length>0&&(a=t.temperature>parseFloat(this.tempThrdFilter)));var n=!0;return this.wardGroupFilter.length>0&&(n=t.group.toLowerCase().includes(this.wardGroupFilter)),!e&&a&&n},getCCRecordsFromDb:function(t){var e=this,a={instID:this.instId};this.startDate.length>0&&(a.startDate=k(this.startDate).hour(0).minute(0).second(0).format()),this.endDate.length>0&&(a.endDate=k(this.endDate).hour(23).minute(59).second(59).format());var n=D.stringify(a),i=new XMLHttpRequest,s=y.a.API_LOCATION+"cc-records?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.ccRecords=JSON.parse(this.responseText).data,e.ccRecords&&(e.items=e.ccRecords.map((function(t){return e.mapCCRecordToItem(t)})),null!=t&&t(e.items))):4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}},deleteCCRecordFromDb:function(t){var e=this,a=new XMLHttpRequest,n=y.a.API_LOCATION+"cc-record/"+t._id;a.open("DELETE",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText);void 0!=t.message&&e.$bvToast.toast(t.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}}}},N=R,P=Object(h["a"])(N,x,S,!1,null,null,null),j=P.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Family Dashboard")])]),a("b-col",{attrs:{xl:"2",md:"4"}},[a("b-button",{attrs:{variant:"primary",to:"./add-family"}},[t._v("Add Family")])],1)],1),a("b-card",{staticClass:"h-100 ml-4 mr-4"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{attrs:{label:"Contact Name","label-for":"contact-name-filter-input","label-cols-sm":"4","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"contact-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.contactNameFilter,callback:function(e){t.contactNameFilter=e},expression:"contactNameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Reg Code Not Sent Only","label-for":"reg-code-filter-input","label-cols-sm":"9","label-align-sm":"right","label-size":"sm"}},[a("b-form-checkbox",{attrs:{id:"reg-code-filter-input"},model:{value:t.regCodeSentFilter,callback:function(e){t.regCodeSentFilter=e},expression:"regCodeSentFilter"}})],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"7",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onViewFamily}},[t._v("View Info")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteFamilies}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"familyTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"family-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-function":t.filterFunction,"filter-included-fields":t.filterOn},on:{"row-selected":t.onRowSelected}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"ward-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},L=[],B=a("72bf"),U={name:"Families",data:function(){return{instId:"",currentPage:1,perPage:20,families:[],fields:["family_contact","phone","email","relation","reg_code_sent"],items:[],selectedItems:[],regCodeSentFilter:!1,contactNameFilter:"",filterOn:["reg_code_sent","family_contact"]}},mounted:function(){var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id),this.getFamiliesFromDb()},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},numRows:function(){return this.items.length},filter:function(){return this.regCodeSentFilter+" "+this.contactNameFilter}},methods:{mapFamilyToItem:function(t){var e=this.getGuardianInFamilyByID(t,t.contact_id);return{_id:t._id,family_contact:e.first_name+" "+e.last_name,phone:e.phone_num,email:e.email,relation:e.relation,reg_code_sent:t.all_reg_code_sent}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onClearSelect:function(){this.selectedItems=[],this.$refs.familyTable.clearSelected()},onViewFamily:function(){var t=this.getFamilyByID(this.selectedItems[0]._id);null!=t&&(this.$store.commit("setLoadedFamily",t),this.$router.push("./info"))},onDeleteFamilies:function(){},filterFunction:function(t){var e=!0;this.regCodeSentFilter&&(e=!t.reg_code_sent);var a=!0;return this.contactNameFilter.length>0&&(a=t.family_contact.toLowerCase().includes(this.contactNameFilter)),e&&a},getFamiliesFromDb:function(){var t=this,e={instID:this.instId},a=B.stringify(e),n=new XMLHttpRequest,i=y.a.API_LOCATION+"families?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.families=JSON.parse(this.responseText).data,t.families&&(t.items=t.families.map((function(e){return t.mapFamilyToItem(e)})))):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}},getGuardianInFamilyByID:function(t,e){for(var a=0;a<t.guardians.length;a++){var n=t.guardians[a];if(n._id===e)return n}return null},getFamilyByID:function(t){for(var e=0;e<this.families.length;e++){var a=this.families[e];if(a._id===t)return a}return null}}},H=U,G=Object(h["a"])(H,E,L,!1,null,null,null),q=G.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Patient Dashboard")])])],1),a("b-card",{staticClass:"h-100"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",{attrs:{"algin-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Patient Name","label-for":"ward-name-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"ward-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.wardNameFilter,callback:function(e){t.wardNameFilter=e},expression:"wardNameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Group","label-for":"group-filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"group-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.wardGroupFilter,callback:function(e){t.wardGroupFilter=e},expression:"wardGroupFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Guardian Name","label-for":"guardian-name-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"guardian-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.guardianNameFilter,callback:function(e){t.guardianNameFilter=e},expression:"guardianNameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"6",lg:"6"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"success"},on:{click:t.onRefresh}},[t._v("Refresh")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onViewFamily}},[t._v("View Family")]),t._e(),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteEvents}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"wardTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"ward-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"filter-function":t.filterFunction},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"ward-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},W=[],$=a("2909"),X=a("72bf"),z={name:"Wards",data:function(){return{instId:"",currentPage:1,perPage:20,wards:[],fields:["name","group","guardian_name","guardian_phone"],items:[],selectedItems:[],wardGroupFilter:"",wardNameFilter:"",guardianNameFilter:"",filterOn:["group","name","guardian_name"]}},mounted:function(){var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id),this.getWardsFromDb()},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},disableCheckin:function(){return!0},numRows:function(){return this.items.length},filter:function(){return this.wardGroupFilter+" "+this.wardNameFilter+" "+this.guardianNameFilter}},methods:{mapWardToItem:function(t){return{_id:t._id,name:t.name,group:t.group,guardian_name:t.guardian_name,guardian_phone:t.phone_num}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onRefresh:function(){this.getWardsFromDb()},onViewFamily:function(){var t=this;this.getFamilyByWardIdFromDb(this.selectedItems[0],(function(e){e&&(t.$store.commit("setLoadedFamily",e),t.$router.push("../families/info"))}))},onCheckInEvents:function(){},onDeleteEvents:function(){var t,e=Object(A["a"])(this.selectedItems);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.deleteWardFromDb(a)}}catch(n){e.e(n)}finally{e.f()}this.getWardsFromDb()},onClearSelect:function(){this.selectedItems=[],this.$refs.wardTable.clearSelected()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!0,a=!0,n=!0;return this.wardGroupFilter.length>0&&(e=t.group.toLowerCase().includes(this.wardGroupFilter)),this.wardNameFilter.length>0&&(a=t.name.toLowerCase().includes(this.wardNameFilter)),this.guardianNameFilter.length>0&&(n=t.guardian_name.toLowerCase().includes(this.guardianNameFilter)),e&&a&&n},getWardsFromDb:function(){var t=this,e={instID:this.instId},a=X.stringify(e),n=new XMLHttpRequest,i=y.a.API_LOCATION+"families?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText).data;e&&(t.wards=t.getWardsFromFamilies(e),t.items=t.wards.map((function(e){return t.mapWardToItem(e)})))}else 4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}},getFamilyByWardIdFromDb:function(t,e){var a={wardID:t._id},n=X.stringify(a),i=new XMLHttpRequest,s=y.a.API_LOCATION+"family?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}},deleteWardFromDb:function(t){var e=this,a=new XMLHttpRequest,n=y.a.API_LOCATION+"ward/"+t._id;a.open("DELETE",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText);void 0!=t.message&&e.$bvToast.toast(t.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}},getWardsFromFamilies:function(t){var e,a=[],n=Object(A["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,s=this.getWardWithContactInfo(i);a.push.apply(a,Object($["a"])(s))}}catch(r){n.e(r)}finally{n.f()}return a},getWardWithContactInfo:function(t){var e=this.getFamilyContactInfo(t);return null===e?null:t.wards.map((function(t){return{_id:t._id,name:t.first_name+" "+t.last_name,group:t.group,guardian_name:e.guardian_name,phone_num:e.phone_num}}))},getFamilyContactInfo:function(t){var e,a=Object(A["a"])(t.guardians);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(n._id===t.contact_id)return{guardian_name:n.first_name+" "+n.last_name,phone_num:n.phone_num}}}catch(i){a.e(i)}finally{a.f()}return null}}},J=z,Y=Object(h["a"])(J,V,W,!1,null,null,null),K=Y.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Family")])])],1),a("b-card",{attrs:{"bg-variant":"light"}},[a("b-form",{attrs:{state:"true"},on:{submit:t.onFamilyFormSubmit}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Guardian Info","label-size":"lg","label-align":"left","label-class":"font-weight-bold pt-0"}},[t._l(t.guardians,(function(e){return a("b-form-group",{key:e.index,staticClass:"mb-0",attrs:{label:"Guardian "+e.index,"label-size":"md","label-align":"left","label-class":"font-weight-bold pt-0"}},[a("b-form-row",{staticClass:"mb-2"},[a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{required:"",id:"guardian-input-first-name-"+e.index,placeholder:"???"},model:{value:t.guardians[e.index-1].first_name,callback:function(a){t.$set(t.guardians[e.index-1],"first_name",a)},expression:"guardians[g.index-1].first_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{required:"",id:"guardian-input-last-name-"+e.index,placeholder:"???"},model:{value:t.guardians[e.index-1].last_name,callback:function(a){t.$set(t.guardians[e.index-1],"last_name",a)},expression:"guardians[g.index-1].last_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Phone #"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{required:"",id:"guardian-input-phone-num-"+e.index,placeholder:"xxx-xxx-xxxx"},model:{value:t.guardians[e.index-1].phone_num,callback:function(a){t.$set(t.guardians[e.index-1],"phone_num",a)},expression:"guardians[g.index-1].phone_num"}})],1)],1)],1),a("b-form-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"5"}},[a("b-input-group",{attrs:{prepend:"Email"}},[a("b-form-input",{attrs:{required:"",id:"guardian-input-email-"+e.index,placeholder:"xxxxxxx@xxx.com"},model:{value:t.guardians[e.index-1].email,callback:function(a){t.$set(t.guardians[e.index-1],"email",a)},expression:"guardians[g.index-1].email"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Relation"}},[a("b-form-input",{attrs:{required:"",id:"guardian-input-relation-"+e.index,placeholder:"Brother"},model:{value:t.guardians[e.index-1].relation,callback:function(a){t.$set(t.guardians[e.index-1],"relation",a)},expression:"guardians[g.index-1].relation"}})],1)],1)],1)],1)})),a("b-row",[a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-info"},on:{click:t.onAddGuardian}},[t._v("Add Guardian")]),t.guardians.length>1?a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-danger"},on:{click:t.onRemoveGuardian}},[t._v("Remove Guardian")]):t._e()],1)],2),a("b-form-group",{staticClass:"mt-4 mb-0",attrs:{label:"Vehicle Info","label-size":"lg","label-align":"left","label-class":"font-weight-bold pt-0"}},[t._l(t.vehicles,(function(e){return a("b-form-group",{key:e.index,staticClass:"mb-0",attrs:{label:"Vehicle "+e.index,"label-size":"md","label-align":"left","label-class":"font-weight-bold pt-0"}},[a("b-form-row",{staticClass:"mb-2"},[a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Make"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"vehicle-input-make-"+e.index,placeholder:"Ford"},model:{value:t.vehicles[e.index-1].make,callback:function(a){t.$set(t.vehicles[e.index-1],"make",a)},expression:"vehicles[v.index-1].make"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Model"}},[a("b-form-input",{attrs:{id:"vehicle-input-model-"+e.index,placeholder:"Model T"},model:{value:t.vehicles[e.index-1].model,callback:function(a){t.$set(t.vehicles[e.index-1],"model",a)},expression:"vehicles[v.index-1].model"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Color"}},[a("b-form-input",{attrs:{id:"vehicle-input-color-"+e.index,placeholder:"Blue"},model:{value:t.vehicles[e.index-1].color,callback:function(a){t.$set(t.vehicles[e.index-1],"color",a)},expression:"vehicles[v.index-1].color"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Plate #"}},[a("b-form-input",{attrs:{id:"vehicle-input-plate-number-"+e.index,placeholder:"XXXXXX"},model:{value:t.vehicles[e.index-1].plate_num,callback:function(a){t.$set(t.vehicles[e.index-1],"plate_num",a)},expression:"vehicles[v.index-1].plate_num"}})],1)],1)],1)],1)})),a("b-row",[a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-info"},on:{click:t.onAddVehicle}},[t._v("Add Vehicle")]),t.vehicles.length>1?a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-danger"},on:{click:t.onRemoveVehicle}},[t._v("Remove Vehicle")]):t._e()],1)],2),a("b-form-group",{staticClass:"mt-4 mb-0",attrs:{label:"Children Info","label-size":"lg","label-align":"left","label-class":"font-weight-bold pt-0"}},[t._l(t.wards,(function(e){return a("b-form-group",{key:e.index,staticClass:"mb-0",attrs:{label:"Child "+e.index,"label-size":"md","label-align":"left","label-class":"font-weight-bold pt-0"}},[a("b-form-row",{staticClass:"mb-2"},[a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"ward-input-first-name-"+e.index,placeholder:"???"},model:{value:t.wards[e.index-1].first_name,callback:function(a){t.$set(t.wards[e.index-1],"first_name",a)},expression:"wards[w.index-1].first_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{id:"ward-input-last-name-"+e.index,placeholder:"???"},model:{value:t.wards[e.index-1].last_name,callback:function(a){t.$set(t.wards[e.index-1],"last_name",a)},expression:"wards[w.index-1].last_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Group"}},[a("b-form-input",{attrs:{id:"ward-input-group-"+e.index,placeholder:"Group?"},model:{value:t.wards[e.index-1].group,callback:function(a){t.$set(t.wards[e.index-1],"group",a)},expression:"wards[w.index-1].group"}})],1)],1)],1)],1)})),a("b-row",[a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-info"},on:{click:t.onAddWard}},[t._v("Add Child")]),t.wards.length>1?a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-danger"},on:{click:t.onRemoveWard}},[t._v("Remove Child")]):t._e()],1)],2),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v("Submit")])],1)],1)],1)],1)},Z=[],tt={name:"AddFamily",data:function(){return{guardians:[this.getNewGuardian(1)],wards:[this.getNewWard(1)],vehicles:[this.getNewVehicle(1)]}},watch:{},computed:{instId:function(){var t=this.$store.state.activeUser;return null===t||void 0===t.institution_id?"":t.institution_id}},methods:{onAddGuardian:function(){var t=this.getNewGuardian(this.guardians.length+1);this.guardians.push(t)},onRemoveGuardian:function(){this.guardians.pop()},onAddVehicle:function(){var t=this.getNewWard(this.vehicles.length+1);this.vehicles.push(t)},onRemoveVehicle:function(){this.vehicles.pop()},onAddWard:function(){var t=this.getNewWard(this.wards.length+1);this.wards.push(t)},onRemoveWard:function(){this.wards.pop()},onFamilyFormSubmit:function(t){t.preventDefault();var e=this.getFamilyToSubmit(),a=this,n=new XMLHttpRequest,i=y.a.API_LOCATION+"family";n.open("POST",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=function(){if(4===this.readyState&&201===this.status){var t=JSON.parse(this.responseText);void 0!=t.message&&a.$bvToast.toast(t.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{n.send(JSON.stringify(e))}catch(s){alert(s)}},getNewGuardian:function(t){return{index:t,first_name:"",last_name:"",phone_num:"",email:"",relation:""}},getNewWard:function(t){return{index:t,first_name:"",last_name:"",group:""}},getNewVehicle:function(t){return{index:t,make:"",model:"",color:"",plate_num:""}},getFamilyToSubmit:function(){return{institution_id:this.instId,guardians:this.guardians,wards:this.wards}}}},et=tt,at=Object(h["a"])(et,Q,Z,!1,null,null,null),nt=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("h3",[t._v("Family Information")]),a("b-card",{attrs:{title:"Guardians",align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{on:{click:function(e){return t.onCreateGuardian()}}},[t._v("Add Guardian")])],1)]},proxy:!0}])},[a("b-table",{attrs:{bordered:"",items:t.gItems,fields:t.gFields,stacked:"md"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-link",{staticClass:"mr-2",staticStyle:{color:"green"},on:{click:function(a){return t.onCheckRegCode(e.item)}}},[a("b",[t._v("Reg.Code")])]),a("b-link",{staticClass:"mr-2",staticStyle:{color:"blue"},on:{click:function(a){return t.onEditGuardian(e.item)}}},[a("b",[t._v("Edit")])]),a("b-link",{staticClass:"mr-1",staticStyle:{color:"red"},on:{click:function(a){return t.onDeleteGuardian(e.item)}}},[a("b",[t._v("Delete")])])]}}])})],1),a("b-card",{attrs:{title:"Vehicles",align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{on:{click:function(e){return t.onCreateVehicle()}}},[t._v("Add Vehicle")])],1)]},proxy:!0}])},[a("b-table",{attrs:{bordered:"",items:t.vItems,fields:t.vFields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-link",{staticClass:"mr-2",staticStyle:{color:"blue"},on:{click:function(a){return t.onEditVehicle(e.item)}}},[a("b",[t._v("Edit")])]),a("b-link",{staticClass:"mr-1",staticStyle:{color:"red"},on:{click:function(a){return t.onDeleteVehicle(e.item)}}},[a("b",[t._v("Delete")])])]}}])})],1),a("b-card",{attrs:{title:"Patients",align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{on:{click:function(e){return t.onCreateWard()}}},[t._v("Add Patient")])],1)]},proxy:!0}])},[a("b-table",{attrs:{bordered:"",items:t.wItems,fields:t.wFields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-link",{staticClass:"mr-2",staticStyle:{color:"blue"},on:{click:function(a){return t.onEditWard(e.item)}}},[a("b",[t._v("Edit")])]),a("b-link",{staticClass:"mr-1",staticStyle:{color:"red"},on:{click:function(a){return t.onDeleteWard(e.item)}}},[a("b",[t._v("Delete")])])]}}])})],1),a("b-modal",{ref:"reg-code-modal",attrs:{"hide-footer":"",title:"Check Registration Code"}},[a("div",{staticClass:"d-block test-left ml-4 mb-2"},[t._v(" Registration Code for "),a("b",[t._v(t._s(t.gModalItem.first_name+" "+t.gModalItem.last_name))]),t._v(" is "),a("b",[t._v(t._s(t.displayRegCode))])]),a("b-form",[a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Phone #"}},[a("b-form-input",{attrs:{id:"regcode-phone-input",placeholder:"xxx-xxx-xxxx"},model:{value:t.regCodePhoneNum,callback:function(e){t.regCodePhoneNum=e},expression:"regCodePhoneNum"}})],1)],1),a("b-row",{staticClass:"mr-1",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onSendRegCode}},[t._v("Send RegCode")])],1)],1),a("b-modal",{ref:"guardian-modal",attrs:{"hide-footer":"",title:"Edit Guardian"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.gModalAction)+" Guardian")])]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"guardian-input-first-name'",placeholder:"???"},model:{value:t.gModalItem.first_name,callback:function(e){t.$set(t.gModalItem,"first_name",e)},expression:"gModalItem.first_name"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{id:"guardian-input-last-name",placeholder:"???"},model:{value:t.gModalItem.last_name,callback:function(e){t.$set(t.gModalItem,"last_name",e)},expression:"gModalItem.last_name"}})],1)],1)],1),a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Email"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"guardian-input-email",placeholder:"???"},model:{value:t.gModalItem.email,callback:function(e){t.$set(t.gModalItem,"email",e)},expression:"gModalItem.email"}})],1),a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Phone #"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"guardian-input-phone-number",placeholder:"???"},model:{value:t.gModalItem.phone,callback:function(e){t.$set(t.gModalItem,"phone",e)},expression:"gModalItem.phone"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Relation"}},[a("b-form-input",{attrs:{id:"guardian-input-relation",placeholder:"???"},model:{value:t.gModalItem.relation,callback:function(e){t.$set(t.gModalItem,"relation",e)},expression:"gModalItem.relation"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onGuardianFormSubmit}},[t._v(t._s(t.gModalAction))])],1)],1)],1),a("b-modal",{ref:"vehicle-modal",attrs:{"hide-footer":"",title:"Edit Vehicle"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.vModalAction)+" Vehicle")])]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Make"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"vehicle-input-make'",placeholder:"???"},model:{value:t.vModalItem.make,callback:function(e){t.$set(t.vModalItem,"make",e)},expression:"vModalItem.make"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Model"}},[a("b-form-input",{attrs:{id:"vehicle-input-model",placeholder:"???"},model:{value:t.vModalItem.model,callback:function(e){t.$set(t.vModalItem,"model",e)},expression:"vModalItem.model"}})],1)],1)],1),a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Color"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"vehicle-input-color'",placeholder:"???"},model:{value:t.vModalItem.color,callback:function(e){t.$set(t.vModalItem,"color",e)},expression:"vModalItem.color"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Plate #"}},[a("b-form-input",{attrs:{id:"vehicle-input-plate",placeholder:"???"},model:{value:t.vModalItem.plate_number,callback:function(e){t.$set(t.vModalItem,"plate_number",e)},expression:"vModalItem.plate_number"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onVechileFormSubmit}},[t._v(t._s(t.vModalAction))])],1)],1)],1),a("b-modal",{ref:"ward-modal",attrs:{"hide-footer":"",title:"Edit Ward"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.wModalAction)+" Ward")])]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"ward-input-first-name'",placeholder:"???"},model:{value:t.wModalItem.first_name,callback:function(e){t.$set(t.wModalItem,"first_name",e)},expression:"wModalItem.first_name"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{id:"ward-input-last-name",placeholder:"???"},model:{value:t.wModalItem.last_name,callback:function(e){t.$set(t.wModalItem,"last_name",e)},expression:"wModalItem.last_name"}})],1)],1)],1),a("b-form-row",[a("b-col",{attrs:{sm:"4"}},[a("b-input-group",{attrs:{prepend:"Group"}},[a("b-form-input",{attrs:{id:"ward-input-group",placeholder:"???"},model:{value:t.wModalItem.group,callback:function(e){t.$set(t.wModalItem,"group",e)},expression:"wModalItem.group"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onWardFormSubmit}},[t._v(t._s(t.wModalAction))])],1)],1)],1)],1)},st=[],rt=a("72bf"),ot={name:"ViewFamilyInfo",data:function(){var t=this.getNewGuardianModalItem(),e=this.getNewVehicleModalItem(),a=this.getNewWardModalItem();return{loadedFamily:null,gModalAction:"Update",vModalAction:"Update",wModalAction:"Update",gItems:[],vItems:[],wItems:[],gFields:["guardian_name","phone","email","relation","reg_code_sent","status","actions"],vFields:["make","model","color","plate_number","actions"],wFields:["name","group","actions"],gModalItem:t,vModalItem:e,wModalItem:a,currentRegCode:null,regCodePhoneNum:""}},mounted:function(){if(this.loadedFamily=this.$store.state.loadedFamily,null===this.loadedFamily)return this.resetGuardianVariables(),this.resetVehicleVariables(),void this.resetWardVariables();this.processLoadedFamily()},computed:{displayRegCode:function(){return null===this.currentRegCode?"":this.currentRegCode.reg_code}},watch:{},methods:{mapGuardianToItem:function(t){var e=0!==t.status,a=e?"YES":"NO",n=t.first_name,i=t.last_name,s=2===t.status?"activated":"assigned";return{_id:t._id,guardian_name:n+" "+i,phone:t.phone_num,email:t.email,relation:t.relation,device_id:t.device_id,reg_code_sent:a,first_name:n,last_name:i,status:s}},mapVehicleToItem:function(t){return{_id:t._id,make:t.make,model:t.model,color:t.color,plate_number:t.plate_num}},mapWardToItem:function(t){var e=t.first_name,a=t.last_name;return{_id:t._id,name:e+" "+a,first_name:e,last_name:a,group:t.group}},onCheckRegCode:function(t){this.gModalItem=t,this.getRegCodeByGuardianIDFromDb(),this.regCodePhoneNum=t.phone,this.$refs["reg-code-modal"].show()},onSendRegCode:function(){this.sendRegCodeWithSMS(),this.$refs["reg-code-modal"].hide()},onCreateGuardian:function(){this.gModalAction="Create",this.gModalItem=this.getNewGuardianModalItem(),this.$refs["guardian-modal"].show()},onEditGuardian:function(t){this.gModalAction="Update",this.gModalItem=t,this.$refs["guardian-modal"].show()},onGuardianFormSubmit:function(){"Update"===this.gModalAction?this.updateGuardianToDb():"Create"===this.gModalAction&&this.addNewGuardianToDb()},onDeleteGuardian:function(t){this.gModalItem=t,this.deleteGuardianInDb()},onCreateVehicle:function(){this.vModalAction="Create",this.vModalItem=this.getNewVehicleModalItem(),this.$refs["vehicle-modal"].show()},onEditVehicle:function(t){this.vModalAction="Update",this.vModalItem=t,this.$refs["vehicle-modal"].show()},onVechileFormSubmit:function(){"Update"===this.vModalAction?this.updateVehicleToDb():"Create"===this.vModalAction&&this.addNewVehicleToDb()},onDeleteVehicle:function(t){this.vModalItem=t,this.deleteVehilceInDb()},onCreateWard:function(){this.wModalAction="Create",this.wModalItem=this.getNewWardModalItem(),this.$refs["ward-modal"].show()},onEditWard:function(t){this.wModalAction="Update",this.wModalItem=t,this.$refs["ward-modal"].show()},onWardFormSubmit:function(){"Update"===this.wModalAction?this.updateWardToDb():"Create"===this.wModalAction&&this.addNewWardToDb()},onDeleteWard:function(t){this.wModalItem=t,this.deleteWardInDb()},getRegCodeByGuardianIDFromDb:function(){var t=this,e=new XMLHttpRequest,a={guardianID:this.gModalItem._id},n=rt.stringify(a),i=y.a.API_LOCATION+"reg-code?"+n;e.open("GET",i,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?t.currentRegCode=JSON.parse(this.responseText).data:4===this.readyState&&alert(this.responseText)};try{e.send()}catch(s){alert(s)}},sendRegCodeWithSMS:function(){var t=this,e=new XMLHttpRequest,a={id:this.currentRegCode._id,phone_num:this.regCodePhoneNum,first_name:this.gModalItem.first_name},n=y.a.API_LOCATION+"reg-code/sms";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);t.getFamilyByIdFromDb(),void 0!=e.message&&t.$bvToast.toast(e.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}},addNewGuardianToDb:function(){var t=this.getGuardianToSubmit(),e=this,a=new XMLHttpRequest,n={familyID:this.loadedFamily._id},i=rt.stringify(n),s=y.a.API_LOCATION+"guardian/add-new?"+i;a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4===this.readyState&&201===this.status?(e.getFamilyByIdFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(r){alert(r)}},updateGuardianToDb:function(){var t=this.getGuardianToSubmit(),e=this,a=new XMLHttpRequest,n=y.a.API_LOCATION+"guardian/"+this.gModalItem._id;a.open("PUT",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyByIdFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(i){alert(i)}},deleteGuardianInDb:function(){var t=this,e=new XMLHttpRequest,a=y.a.API_LOCATION+"guardian/"+this.gModalItem._id;e.open("DELETE",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.getFamilyByIdFromDb(),t.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}},addNewVehicleToDb:function(){var t=this.getVehicleToSubmit(),e=this,a=new XMLHttpRequest,n={familyID:this.loadedFamily._id},i=rt.stringify(n),s=y.a.API_LOCATION+"vehicle/add-new?"+i;a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4===this.readyState&&201===this.status?(e.getFamilyByIdFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(r){alert(r)}},updateVehicleToDb:function(){var t=this.getVehicleToSubmit(),e=this,a=new XMLHttpRequest,n=y.a.API_LOCATION+"vehicle/"+this.vModalItem._id;a.open("PUT",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyByIdFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(i){alert(i)}},deleteVehilceInDb:function(){var t=this,e=new XMLHttpRequest,a=y.a.API_LOCATION+"vehicle/"+this.vModalItem._id;e.open("DELETE",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.getFamilyByIdFromDb(),t.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}},addNewWardToDb:function(){var t=this.getWardToSubmit(),e=this,a=new XMLHttpRequest,n={familyID:this.loadedFamily._id},i=rt.stringify(n),s=y.a.API_LOCATION+"ward/add-new?"+i;a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4===this.readyState&&201===this.status?(e.getFamilyByIdFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(r){alert(r)}},updateWardToDb:function(){var t=this.getWardToSubmit(),e=this,a=new XMLHttpRequest,n=y.a.API_LOCATION+"ward/"+this.wModalItem._id;a.open("PUT",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyByIdFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(i){alert(i)}},deleteWardInDb:function(){var t=this,e=new XMLHttpRequest,a=y.a.API_LOCATION+"ward/"+this.wModalItem._id;e.open("DELETE",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.getFamilyByIdFromDb(),t.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}},getFamilyByIdFromDb:function(){var t=this,e=new XMLHttpRequest;if(null!==this.loadedFamily){var a=y.a.API_LOCATION+"family/"+this.loadedFamily._id;e.open("GET",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.loadedFamily=JSON.parse(this.responseText).data,t.$store.commit("setLoadedFamily",t.loadedFamily),t.loadedFamily&&t.processLoadedFamily()):4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}}},getGuardianToSubmit:function(){return{phone_num:this.gModalItem.phone,email:this.gModalItem.email,device_id:this.gModalItem.device_id,first_name:this.gModalItem.first_name,last_name:this.gModalItem.last_name,relation:this.gModalItem.relation}},getNewGuardianModalItem:function(){return{phone:"",email:"",device_id:"",first_name:"",last_name:"",relation:""}},getVehicleToSubmit:function(){return{make:this.vModalItem.make,model:this.vModalItem.model,color:this.vModalItem.color,plate_num:this.vModalItem.plate_number}},getNewVehicleModalItem:function(){return{make:"",model:"",color:"",plate_number:""}},getWardToSubmit:function(){return{first_name:this.wModalItem.first_name,last_name:this.wModalItem.last_name,group:this.wModalItem.group}},getNewWardModalItem:function(){return{first_name:"",last_name:"",group:""}},resetGuardianVariables:function(){this.gItems=[],this.gModalItem=this.getNewGuardianModalItem()},resetVehicleVariables:function(){this.vItems=[],this.vModalItem=this.getNewVehicleModalItem()},resetWardVariables:function(){this.wItems=[],this.wModalItem=this.getNewWardModalItem()},processLoadedFamily:function(){var t=this;this.gItems=this.loadedFamily.guardians.map((function(e){return t.mapGuardianToItem(e)})),this.vItems=this.loadedFamily.vehicles.map((function(e){return t.mapVehicleToItem(e)})),this.wItems=this.loadedFamily.wards.map((function(e){return t.mapWardToItem(e)}))}}},lt=ot,dt=Object(h["a"])(lt,it,st,!1,null,null,null),ct=dt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Admin Dashboard")])])],1),a("b-card",{staticClass:"h-100"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-table",{ref:"adminTable",attrs:{bordered:"","sticky-header":"90%",id:"admin-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"ward-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},mt=[],ht=a("72bf"),pt=a("c1df"),ft="MMM DD YYYY hh:mm A",bt={name:"Admins",data:function(){return{instId:"",currentPage:1,perPage:20,admins:[],fields:["FRAS_username","last_login"],items:[]}},mounted:function(){var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id),this.getAdminsFromDb()},computed:{numRows:function(){return this.items.length}},methods:{mapAdminToItem:function(t){var e=pt(t.last_login_at);return{_id:t._id,FRAS_username:t.fras_username,last_login:e.format(ft)}},getAdminsFromDb:function(){var t=this,e={instID:this.instId},a=ht.stringify(e),n=new XMLHttpRequest,i=y.a.API_LOCATION+"admins?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.admins=JSON.parse(this.responseText).data,t.admins&&(t.items=t.admins.map((function(e){return t.mapAdminToItem(e)})))):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}}}},gt=bt,vt=Object(h["a"])(gt,ut,mt,!1,null,null,null),yt=vt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Profile")])])],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-card",[a("b-row",{staticClass:"ml-2 mt-2"}),a("h5",[a("b",[t._v(" Institution: ")]),t._v(" "+t._s(t.name))]),a("h5",[a("b",[t._v(" Address: ")]),t._v(" "+t._s(t.address+", "+t.state))])],1)],1)],1)],1)},Ct=[],wt={name:"AdminProfile",data:function(){return{instId:"",institution:null}},computed:{name:function(){return null===this.institution?"":this.institution.name},address:function(){return null===this.institution?"":this.institution.address},state:function(){return null===this.institution?"":this.institution.state}},mounted:function(){var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id),this.getInstFromDb()},methods:{getInstFromDb:function(){var t=this,e=new XMLHttpRequest,a=y.a.API_LOCATION+"institution/"+this.instId;e.open("GET",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?t.institution=JSON.parse(this.responseText).data:4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}}}},It=wt,Tt=Object(h["a"])(It,_t,Ct,!1,null,null,null),xt=Tt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Settings")])])],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportCCRecords}},[t._v("Export CC-Records")])],1),a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportWards}},[t._v("Export Patients")])],1),a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportFamilies}},[t._v("Export Families")])],1),a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportSurveys}},[t._v("Export Surveys")])],1)],1)],1)},At=[],Dt=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("c1df")),kt=a("72bf"),Ft={name:"AdminProfile",data:function(){return{instId:"",institution:null}},mounted:function(){var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id)},methods:{onExportCCRecords:function(){var t=this;this.getCCRecordsExportFromDb("cc-records",(function(e){var a="export-cc-records-"+Dt().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportWards:function(){var t=this;this.getCCRecordsExportFromDb("wards",(function(e){var a="export-wards-"+Dt().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportFamilies:function(){var t=this;this.getCCRecordsExportFromDb("families",(function(e){var a="export-families-"+Dt().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportSurveys:function(){var t=this;this.getCCRecordsExportFromDb("surveys",(function(e){var a="export-surveys-"+Dt().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},getCCRecordsExportFromDb:function(t,e){var a={instID:this.instId},n=kt.stringify(a),i=new XMLHttpRequest,s=y.a.API_LOCATION+"export/"+t+"?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){4===this.readyState&&200===this.status?e(this.responseText):4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}},downloadExport:function(t,e){var a=new File([e],t,{type:"text/csv"}),n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,n.click()}}},Mt=Ft,Ot=Object(h["a"])(Mt,St,At,!1,null,null,null),Rt=Ot.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2"},[a("h4",[t._v("Welcome "+t._s(t.loggedInGuardianName))])]),a("b-row",{staticClass:"ml-4 mr-4",attrs:{"align-h":"between"}},[a("b-col",{attrs:{lg:"3",cols:"5"}},[a("b-row",[t._v(t._s(t.date))]),a("b-row",[t._v(t._s(t.time))])],1),a("b-col",{attrs:{lg:"2",cols:"3"}},[a("b-button",{attrs:{variant:"success"},on:{click:t.onSync}},[t._v("Sync")]),t.enableSurvey?a("b-button",{attrs:{variant:"primary"}},[t._v("Take Survey")]):t._e()],1)],1),a("b-row",{staticStyle:{"margin-top":"80px"}},[a("b-col",{attrs:{cols:"12"}},[a("b-row",{staticClass:"mb-2",attrs:{"align-h":"around"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onCheckIn}},[t._v("Check In")])],1)],1)],1),a("b-modal",{ref:"cc-modal",attrs:{static:"","hide-footer":"",title:t.modalTitle+" QRCode"},on:{hidden:t.onModalHidden}},[a("b-container",[a("div",{staticStyle:{width:"250",height:"250","margin-top":"15px"},attrs:{id:"qrcode"}})])],1)],1)},Pt=[];a("a15b"),a("ac1f"),a("5319"),a("99af"),a("25f0"),a("466d");(function(){function t(t){this.mode=a.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var i=[],s=this.data.charCodeAt(e);s>65536?(i[0]=240|(1835008&s)>>>18,i[1]=128|(258048&s)>>>12,i[2]=128|(4032&s)>>>6,i[3]=128|63&s):s>2048?(i[0]=224|(61440&s)>>>12,i[1]=128|(4032&s)>>>6,i[2]=128|63&s):s>128?(i[0]=192|(1984&s)>>>6,i[1]=128|63&s):i[0]=s,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,a=this.parsedData.length;e<a;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var a=new t(e);this.dataList.push(a),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,a),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},setupPositionProbePattern:function(t,e){for(var a=-1;a<=7;a++)if(!(t+a<=-1||this.moduleCount<=t+a))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+a][e+n]=0<=a&&a<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,e=0,a=0;a<8;a++){this.makeImpl(!0,a);var n=r.getLostPoint(this);(0==a||t>n)&&(t=n,e=a)}return e},createMovieClip:function(t,e,a){var n=t.createEmptyMovieClip(e,a),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var r=s*i,o=0;o<this.modules[s].length;o++){var l=o*i,d=this.modules[s][o];d&&(n.beginFill(0,100),n.moveTo(l,r),n.lineTo(l+i,r),n.lineTo(l+i,r+i),n.lineTo(l,r+i),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=r.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var n=t[e],i=t[a];if(null==this.modules[n][i])for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)this.modules[n+s][i+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o}},setupTypeNumber:function(t){for(var e=r.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var n=!t&&1==(e>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=n}for(a=0;a<18;a++){n=!t&&1==(e>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=n}},setupTypeInfo:function(t,e){for(var a=this.errorCorrectLevel<<3|e,n=r.getBCHTypeInfo(a),i=0;i<15;i++){var s=!t&&1==(n>>i&1);i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(i=0;i<15;i++){s=!t&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var a=-1,n=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var l=0;l<2;l++)if(null==this.modules[n][o-l]){var d=!1;s<t.length&&(d=1==(t[s]>>>i&1));var c=r.getMask(e,n,o-l);c&&(d=!d),this.modules[n][o-l]=d,i--,-1==i&&(s++,i=7)}if(n+=a,n<0||this.moduleCount<=n){n-=a,a=-a;break}}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,a,n){for(var i=c.getRSBlocks(t,a),s=new u,o=0;o<n.length;o++){var l=n[o];s.put(l.mode,4),s.put(l.getLength(),r.getLengthInBits(l.mode,t)),l.write(s)}var d=0;for(o=0;o<i.length;o++)d+=i[o].dataCount;if(s.getLengthInBits()>8*d)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*d+")");s.getLengthInBits()+4<=8*d&&s.put(0,4);while(s.getLengthInBits()%8!=0)s.putBit(!1);while(1){if(s.getLengthInBits()>=8*d)break;if(s.put(e.PAD0,8),s.getLengthInBits()>=8*d)break;s.put(e.PAD1,8)}return e.createBytes(s,i)},e.createBytes=function(t,e){for(var a=0,n=0,i=0,s=new Array(e.length),o=new Array(e.length),l=0;l<e.length;l++){var c=e[l].dataCount,u=e[l].totalCount-c;n=Math.max(n,c),i=Math.max(i,u),s[l]=new Array(c);for(var m=0;m<s[l].length;m++)s[l][m]=255&t.buffer[m+a];a+=c;var h=r.getErrorCorrectPolynomial(u),p=new d(s[l],h.getLength()-1),f=p.mod(h);o[l]=new Array(h.getLength()-1);for(m=0;m<o[l].length;m++){var b=m+f.getLength()-o[l].length;o[l][m]=b>=0?f.get(b):0}}var g=0;for(m=0;m<e.length;m++)g+=e[m].totalCount;var v=new Array(g),y=0;for(m=0;m<n;m++)for(l=0;l<e.length;l++)m<s[l].length&&(v[y++]=s[l][m]);for(m=0;m<i;m++)for(l=0;l<e.length;l++)m<o[l].length&&(v[y++]=o[l][m]);return v};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},r={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(r.getBCHDigit(e)-r.getBCHDigit(r.G15)>=0)e^=r.G15<<r.getBCHDigit(e)-r.getBCHDigit(r.G15);return(t<<10|e)^r.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(r.getBCHDigit(e)-r.getBCHDigit(r.G18)>=0)e^=r.G18<<r.getBCHDigit(e)-r.getBCHDigit(r.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return r.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,a){switch(t){case s.PATTERN000:return(e+a)%2==0;case s.PATTERN001:return e%2==0;case s.PATTERN010:return a%3==0;case s.PATTERN011:return(e+a)%3==0;case s.PATTERN100:return(Math.floor(e/2)+Math.floor(a/3))%2==0;case s.PATTERN101:return e*a%2+e*a%3==0;case s.PATTERN110:return(e*a%2+e*a%3)%2==0;case s.PATTERN111:return(e*a%3+(e+a)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new d([1],0),a=0;a<t;a++)e=e.multiply(new d([1,o.gexp(a)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:return 8;case a.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),a=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var s=0,r=t.isDark(n,i),o=-1;o<=1;o++)if(!(n+o<0||e<=n+o))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||0==o&&0==l||r==t.isDark(n+o,i+l)&&s++;s>5&&(a+=3+s-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var d=0;t.isDark(n,i)&&d++,t.isDark(n+1,i)&&d++,t.isDark(n,i+1)&&d++,t.isDark(n+1,i+1)&&d++,0!=d&&4!=d||(a+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(a+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(a+=40);var c=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&c++;var u=Math.abs(100*c/e/e-50)/5;return a+=10*u,a}},o={glog:function(t){if(t<1)throw new Error("glog("+t+")");return o.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return o.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)o.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)o.EXP_TABLE[l]=o.EXP_TABLE[l-4]^o.EXP_TABLE[l-5]^o.EXP_TABLE[l-6]^o.EXP_TABLE[l-8];for(l=0;l<255;l++)o.LOG_TABLE[o.EXP_TABLE[l]]=l;function d(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var a=0;while(a<t.length&&0==t[a])a++;this.num=new Array(t.length-a+e);for(var n=0;n<t.length-a;n++)this.num[n]=t[n+a]}function c(t,e){this.totalCount=t,this.dataCount=e}function u(){this.buffer=[],this.length=0}d.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var n=0;n<t.getLength();n++)e[a+n]^=o.gexp(o.glog(this.get(a))+o.glog(t.get(n)));return new d(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=o.glog(this.get(0))-o.glog(t.get(0)),a=new Array(this.getLength()),n=0;n<this.getLength();n++)a[n]=this.get(n);for(n=0;n<t.getLength();n++)a[n]^=o.gexp(o.glog(t.get(n))+e);return new d(a,0).mod(t)}},c.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],c.getRSBlocks=function(t,e){var a=c.getRsBlockTable(t,e);if(void 0==a)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=a.length/3,i=[],s=0;s<n;s++)for(var r=a[3*s+0],o=a[3*s+1],l=a[3*s+2],d=0;d<r;d++)i.push(new c(o,l));return i},c.getRsBlockTable=function(t,e){switch(e){case i.L:return c.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return c.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return c.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return c.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},u.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var a=0;a<e;a++)this.putBit(1==(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function h(){return"undefined"!=typeof CanvasRenderingContext2D}function p(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var a=e.toString().match(/android ([0-9]\.[0-9])/i);a&&a[1]&&(t=parseFloat(a[1]))}return t}var f=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,a=this._el,n=t.getModuleCount();Math.floor(e.width/n),Math.floor(e.height/n);function i(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)e.hasOwnProperty(n)&&a.setAttribute(n,e[n]);return a}this.clear();var s=i("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:e.colorLight});s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.appendChild(s),s.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),s.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var r=0;r<n;r++)for(var o=0;o<n;o++)if(t.isDark(r,o)){var l=i("use",{x:String(o),y:String(r)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),s.appendChild(l)}},t.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)},t}(),b="svg"===document.documentElement.tagName.toLowerCase(),g=b?f:h()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var a=this;if(a._fFail=e,a._fSuccess=t,null===a._bSupportDataURI){var n=document.createElement("img"),i=function(){a._bSupportDataURI=!1,a._fFail&&a._fFail.call(a)},s=function(){a._bSupportDataURI=!0,a._fSuccess&&a._fSuccess.call(a)};return n.onabort=i,n.onerror=i,n.onload=s,void(n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===a._bSupportDataURI&&a._fSuccess?a._fSuccess.call(a):!1===a._bSupportDataURI&&a._fFail&&a._fFail.call(a)}var a=function(t,e){this._bIsPainted=!1,this._android=p(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(t){var e=this._elImage,a=this._oContext,n=this._htOption,i=t.getModuleCount(),s=n.width/i,r=n.height/i,o=Math.round(s),l=Math.round(r);e.style.display="none",this.clear();for(var d=0;d<i;d++)for(var c=0;c<i;c++){var u=t.isDark(d,c),m=c*s,h=d*r;a.strokeStyle=u?n.colorDark:n.colorLight,a.lineWidth=1,a.fillStyle=u?n.colorDark:n.colorLight,a.fillRect(m,h,s,r),a.strokeRect(Math.floor(m)+.5,Math.floor(h)+.5,o,l),a.strokeRect(Math.ceil(m)-.5,Math.ceil(h)-.5,o,l)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},a}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,a=this._el,n=t.getModuleCount(),i=Math.floor(e.width/n),s=Math.floor(e.height/n),r=['<table style="border:0;border-collapse:collapse;">'],o=0;o<n;o++){r.push("<tr>");for(var l=0;l<n;l++)r.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+s+"px;background-color:"+(t.isDark(o,l)?e.colorDark:e.colorLight)+';"></td>');r.push("</tr>")}r.push("</table>"),a.innerHTML=r.join("");var d=a.childNodes[0],c=(e.width-d.offsetWidth)/2,u=(e.height-d.offsetHeight)/2;c>0&&u>0&&(d.style.margin=u+"px "+c+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();function v(t,e){for(var a=1,n=y(t),s=0,r=m.length;s<=r;s++){var o=0;switch(e){case i.L:o=m[s][0];break;case i.M:o=m[s][1];break;case i.Q:o=m[s][2];break;case i.H:o=m[s][3];break}if(n<=o)break;a++}if(a>m.length)throw new Error("Too long data");return a}function y(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}n=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"===typeof e&&(e={text:e}),e)for(var a in e)this._htOption[a]=e[a];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(g=f),this._android=p(),this._el=t,this._oQRCode=null,this._oDrawing=new g(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},n.prototype.makeCode=function(t){this._oQRCode=new e(v(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},n.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},n.prototype.clear=function(){this._oDrawing.clear()},n.CorrectLevel=i})();var jt=n,Et=a("c1df"),Lt="MMM DD, YYYY",Bt="hh:mm:ss A",Ut="Check-In",Ht="Schedule",Gt="Check-Out",qt=0,Vt=1,Wt=2,$t={name:"Mobile",data:function(){return{timer:"",timeObj:null,date:"",time:"",loggedInMember:null,ccRecord:null,qrcode:null,modalTitle:"",surveyState:qt}},created:function(){var t=this,e=Et;this.timer=setInterval((function(){t.timeObj=e(),t.date=t.timeObj.format(Lt),t.time=t.timeObj.format(Bt)}),1e3)},mounted:function(){this.loggedInMember=this.$store.state.loggedInMember,this.syncCCRecordWithDb((function(){})),this.qrcode=new jt(document.getElementById("qrcode"),{width:250,height:250}),null!==this.loggedInFamily||this.$router.push("/mobile/login")},beforeDestroy:function(){clearInterval(this.timer)},computed:{wards:function(){return null===this.loggedInFamily?[]:this.loggedInFamily.wards},wardIds:function(){return this.loggedInFamily.wards.map((function(t){return t._id}))},memberStage:function(){return null===this.ccRecord?"":0===this.ccRecord.status?Ut:1===this.ccRecord.status?Ht:2===this.ccRecord.status?Gt:""},loggedInGuardianName:function(){return this.loggedInMember?this.loggedInMember.first_name:""},enableSurvey:function(){return this.surveyState===Wt}},methods:{onSync:function(){this.syncCCRecordWithDb((function(){}))},onCheckIn:function(){this.surveyState=Vt,this.showCCModal()},onCheckOut:function(){this.surveyState=qt,this.showCCModal()},onModalHidden:function(){var t=this;this.syncCCRecordWithDb((function(e,a){if(a._id!=e&&t.surveyState===Vt)return t.surveyState=Wt,void window.location.replace("/surveys/check-in-survey.html");t.surveyState=qt}))},showCCModal:function(){this.syncCCRecordWithDb((function(){})),this.modalTitle=this.memberStage,this.$refs["cc-modal"].show();var t=this.getQRCodeString();this.qrcode.makeCode(t)},syncCCRecordWithDb:function(t){var e=this,a=new XMLHttpRequest,n={institution_id:this.loggedInMember.institution_id,member_id:this.loggedInMember._id},i=y.a.API_LOCATION+"cc-record/sync";a.open("POST",i,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var a=e.ccRecord;e.ccRecord=JSON.parse(this.responseText).data,e.ccRecord&&null!=t&&t(a,e.ccRecord)}else 4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(n))}catch(s){alert(s)}},getQRCodeString:function(){var t;return this.memberStage==Ut&&(t="checkin"),this.memberStage==Gt&&(t="checkout"),[this.loggedInMember._id,t].join("|")}}},Xt=$t,zt=Object(h["a"])(Xt,Nt,Pt,!1,null,null,null),Jt=zt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("h4",[t._v("Login User")]),a("b-form",{staticStyle:{"margin-top":"50px"},on:{submit:t.onGuardianLogin}},[a("b-form-group",{attrs:{label:"Phone #: ","label-align":"left","label-for":"phone-number-input",description:"Phone # is for authentication purpose only"}},[a("b-form-input",{attrs:{id:"phone-number-input",placeholder:"Enter Phone #",required:""},on:{keyup:t.focusOut,blur:t.focusOut},model:{value:t.phoneNum,callback:function(e){t.phoneNum=e},expression:"phoneNum"}})],1),a("b-row",{staticClass:"ml-1 mb-2"},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Login")])],1)],1),a("b-row",{staticClass:"ml-1"},[a("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.$router.push("/mobile/activate")}}},[t._v("To Activate Page")])],1)],1)},Kt=[],Qt={name:"MobileLogin",data:function(){return{phoneValue:"",phoneNum:"",preventNextIteration:!1}},methods:{focusOut:function(t){["Arrow","Backspace","Shift"].includes(t.key)?this.preventNextIteration=!0:this.preventNextIteration?this.preventNextIteration=!1:(this.phoneNum.length>0&&(this.phoneValue=this.phoneNum.replace(/-/g,"").match(/(\d{1,10})/g)[0]),this.phoneNum=this.phoneValue.replace(/(\d{1,3})(\d{1,3})(\d{1,4})/g,"$1-$2-$3"))},onGuardianLogin:function(t){var e=this;t.preventDefault(),this.getMemberByPhoneNumFromDb((function(t){e.$store.commit("setLoggedInMember",t),e.$router.push("/mobile/home")}),(function(){e.$router.push("/mobile/activate")}))},getMemberByPhoneNumFromDb:function(t,e){var a,n=new XMLHttpRequest,i=y.a.API_LOCATION+"member/login";n.open("POST",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status)a=JSON.parse(this.responseText).data,a&&null!=t&&t(a.member);else if(4===this.readyState){if(a=JSON.parse(this.responseText),void 0!=a.message)return a.message.includes("Not Activated")&&null!=e?void e():void alert(a.message);alert(this.responseText)}};try{n.send(JSON.stringify({phone_num:this.phoneNum}))}catch(s){alert(s)}}}},Zt=Qt,te=Object(h["a"])(Zt,Yt,Kt,!1,null,null,null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("h4",[t._v("Activate User")]),a("b-form",{staticStyle:{"margin-top":"50px"},on:{submit:t.onGuardianActivate}},[a("b-form-group",{attrs:{label:"Phone #: ","label-align":"left","label-for":"phone-number-input",description:"Phone # is for authentication purpose only"}},[a("b-form-input",{attrs:{id:"phone-number-input",placeholder:"Enter Phone #",required:""},on:{keyup:t.focusOut,blur:t.focusOut},model:{value:t.phoneNum,callback:function(e){t.phoneNum=e},expression:"phoneNum"}})],1),a("b-form-group",{attrs:{label:"Reg. Code","label-align":"left","label-for":"reg-code-input",description:"Please check your email for registration code"}},[a("b-form-input",{attrs:{id:"reg-code-input",placeholder:"Enter Reg.Code",required:""},on:{keyup:t.focusOut,blur:t.focusOut},model:{value:t.regCode,callback:function(e){t.regCode=e},expression:"regCode"}})],1),a("b-row",{staticClass:"ml-1 mb-2"},[a("b-button",{attrs:{type:"submit",variant:"warning"}},[t._v("Activate")])],1)],1),a("b-row",{staticClass:"ml-1"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.$router.push("/mobile/login")}}},[t._v("To Login Page")])],1)],1)},ne=[],ie={name:"MobileActivate",data:function(){return{phoneValue:"",phoneNum:"",regCode:"",preventNextIteration:!1}},methods:{focusOut:function(t){["Arrow","Backspace","Shift"].includes(t.key)?this.preventNextIteration=!0:this.preventNextIteration?this.preventNextIteration=!1:(this.phoneNum.length>0&&(this.phoneValue=this.phoneNum.replace(/-/g,"").match(/(\d{1,10})/g)[0]),this.phoneNum=this.phoneValue.replace(/(\d{1,3})(\d{1,3})(\d{1,4})/g,"$1-$2-$3"))},onGuardianActivate:function(){var t=this;this.activateGuardianInDb((function(){t.loginGuardian()}),(function(){alert("Activation Failed:( - Try Another Reg. Code")}))},loginGuardian:function(){var t=this,e=this;this.getFamilyByPhoneNumFromDb((function(a){var n=e.getGuardianInFamilyByPhoneNum(a);t.$store.commit("setLoggedInFamily",a),t.$store.commit("setLoggedInGuardianID",n._id),t.$router.push("/mobile/home")}),(function(){t.$router.push("/mobile/activate")}))},activateGuardianInDb:function(t,e){var a=new XMLHttpRequest,n=y.a.API_LOCATION+"guardian/activate";a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status)null!=t&&t();else if(4===this.readyState){var a=JSON.parse(this.responseText);if(void 0!=a.message)return a.message.includes("Try Another")&&null!=e?void e():void alert(a.message);alert(this.responseText)}};try{a.send(JSON.stringify({phone_num:this.phoneNum,reg_code:this.regCode}))}catch(i){alert(i)}},getFamilyByPhoneNumFromDb:function(t,e){var a=new XMLHttpRequest,n=y.a.API_LOCATION+"guardian/login";a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var a=JSON.parse(this.responseText).data;a&&null!=t&&t(a)}else if(4===this.readyState){var n=JSON.parse(this.responseText);if(void 0!=n.message)return n.message.includes("Not Activated")&&null!=e?void e():void alert(n.message);alert(this.responseText)}};try{a.send(JSON.stringify({phone_num:this.phoneNum}))}catch(i){alert(i)}},getGuardianInFamilyByPhoneNum:function(t){var e,a=Object(A["a"])(t.guardians);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(n.phone_num===this.phoneNum)return n}}catch(i){a.e(i)}finally{a.f()}return""}}},se=ie,re=Object(h["a"])(se,ae,ne,!1,null,null,null),oe=re.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{staticClass:"mb-2",attrs:{sticky:"",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[n("img",{attrs:{src:a("4f32"),alt:""}})]),n("b-navbar-nav",{staticClass:"ml-auto"},[t.showUser?n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("em",[t._v(t._s(t.loggedInGuardianName))])]},proxy:!0}],null,!1,344161884)},[n("b-dropdown-item",{on:{click:t.onSignOut}},[t._v("Sign Out")])],1):t._e()],1)],1),n("router-view")],1)},de=[],ce={name:"MobileContainer",data:function(){return{showUser:!1,loggedInFamily:null,loggedInGuardianID:""}},computed:{loggedInGuardianName:function(){if(!this.loggedInFamily)return"";var t,e=Object(A["a"])(this.loggedInFamily.guardians);try{for(e.s();!(t=e.n()).done;){var a=t.value;if(a._id===this.loggedInGuardianID)return a.first_name}}catch(n){e.e(n)}finally{e.f()}return""}},watch:{$route:function(t,e){this.loggedInFamily=this.$store.state.loggedInFamily,this.loggedInGuardianID=this.$store.state.loggedInGuardianID,null!=this.loggedInFamily?this.showUser=!0:this.showUser=!1}},methods:{onSignOut:function(){this.$store.commit("resetLoggedInFamily"),this.$store.commit("resetLoggedInGuardianID"),this.$router.push("/mobile/login")}}},ue=ce,me=Object(h["a"])(ue,le,de,!1,null,null,null),he=me.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Institution")])]),a("b-col",{attrs:{xl:"3",lg:"4"}},[a("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.$router.push("./add-admin")}}},[t._v("Create Admin")])],1)],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Name","label-for":"name-input"}},[a("b-form-input",{attrs:{id:"name-input",placeholder:"Enter name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Address","label-for":"address-input"}},[a("b-form-input",{attrs:{id:"address-input",placeholder:"Enter address",required:""},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("b-form-group",{attrs:{id:"input-group-3",label:"State","label-for":"state-input"}},[a("b-form-input",{attrs:{id:"state-input",placeholder:"Enter state",required:""},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}})],1),a("b-form-group",{attrs:{id:"input-group-4",label:"Zip Code","label-for":"zip-code-input"}},[a("b-form-input",{attrs:{id:"zip-code-input",placeholder:"Enter Zip Code",required:""},model:{value:t.form.zipCode,callback:function(e){t.$set(t.form,"zipCode",e)},expression:"form.zipCode"}})],1),a("b-form-group",{attrs:{id:"input-group-5",label:"Type","label-for":"type-select"}},[a("b-form-select",{attrs:{id:"type-select",options:t.typeOptions,required:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Create")])],1)],1)],1)],1)},fe=[],be={name:"AddInstitution",data:function(){return{form:{name:"",address:"",state:"",zipCode:"",type:""},typeOptions:[{value:0,text:"School"},{value:1,text:"Hospital"},{value:2,text:"Others"}]}},methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.createInstitutionInDb((function(t){e.$bvToast.toast(t,{title:"DataBase Message",autoHideDelay:2e3})}))},createInstitutionInDb:function(t){var e=new XMLHttpRequest,a={type:this.form.type,name:this.form.name,address:this.form.address,state:this.form.state,zip_code:this.form.zipCode},n=y.a.API_LOCATION+"institution";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){if(4===this.readyState&&201===this.status){var e=JSON.parse(this.responseText);void 0!=e.message&&null!=t&&t(e.message)}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}}}},ge=be,ve=Object(h["a"])(ge,pe,fe,!1,null,null,null),ye=ve.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Admin")])]),a("b-col",{attrs:{xl:"2",lg:"3"}},[a("b-button",{staticClass:"mb-2",attrs:{variant:"info"},on:{click:function(e){return t.$router.push("./add-institution")}}},[t._v("Create Institution")]),a("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.$router.push("./redirect")}}},[t._v("To CC-Portal")])],1)],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-1",label:"Fras Username","label-align":"left","label-for":"name-input"}},[a("b-form-input",{attrs:{id:"name-input",placeholder:"Enter Fras Username",required:""},model:{value:t.form.FrasUsername,callback:function(e){t.$set(t.form,"FrasUsername",e)},expression:"form.FrasUsername"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Affliated Instituttion","label-align":"left","label-for":"institution-select"}},[a("b-form-select",{attrs:{id:"institution-select",options:t.instOptions,required:""},model:{value:t.form.institutionId,callback:function(e){t.$set(t.form,"institutionId",e)},expression:"form.institutionId"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Create")])],1)],1)],1)],1)},Ce=[],we={name:"AddAdmin",data:function(){return{form:{FrasUsername:"",institutionId:""},instOptions:[]}},mounted:function(){this.getInstitutionsFromDb()},methods:{mapInstToOptions:function(t){return{value:t._id,text:t.name}},onSubmit:function(t){var e=this;t.preventDefault(),this.createAdminInDb((function(t){e.$bvToast.toast(t,{title:"DataBase Message",autoHideDelay:2e3})}))},createAdminInDb:function(t){var e=new XMLHttpRequest,a={fras_username:this.form.FrasUsername,institution_id:this.form.institutionId},n=y.a.API_LOCATION+"admin/register";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){if(4===this.readyState&&201===this.status){var e=JSON.parse(this.responseText);void 0!=e.message&&null!=t&&t(e.message)}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}},getInstitutionsFromDb:function(){var t=this,e=new XMLHttpRequest,a=y.a.API_LOCATION+"institutions";e.open("GET",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=e.data;a&&(t.instOptions=a.map((function(e){return t.mapInstToOptions(e)})))}else 4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}}}},Ie=we,Te=Object(h["a"])(Ie,_e,Ce,!1,null,null,null),xe=Te.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Admin")])]),a("b-col",{attrs:{xl:"3",lg:"4"}},[a("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.$router.push("./add-admin")}}},[t._v("Create Admin")])],1)],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form-select",{staticClass:"mb-4",attrs:{id:"institution-select",options:t.instOptions},model:{value:t.instIdSelected,callback:function(e){t.instIdSelected=e},expression:"instIdSelected"}}),a("b-form-select",{staticClass:"mb-4",attrs:{id:"admin-select",options:t.adminOptions},model:{value:t.adminSelected,callback:function(e){t.adminSelected=e},expression:"adminSelected"}}),a("b-button",{attrs:{variant:"success",disabled:0==t.adminSelected.length},on:{click:t.onRedirectToCCPortal}},[t._v("To CC-Portal")])],1)],1)],1)},Ae=[],De=a("72bf"),ke={name:"RedirectCCPortal",data:function(){return{instIdSelected:"",adminSelected:"",instOptions:[],adminOptions:[]}},watch:{instIdSelected:function(){0===this.instIdSelected.length&&(this.adminOptions=[]),this.getAdminsFromDb()}},mounted:function(){this.getInstitutionsFromDb()},methods:{mapInstToOptions:function(t){return{value:t._id,text:t.name}},mapAdminToOptions:function(t){return{value:t.fras_username,text:t.fras_username}},onRedirectToCCPortal:function(){y.a.FRAS_USERNAME=this.adminSelected,this.$router.push("/portal/cc-records")},getInstitutionsFromDb:function(){var t=this,e=y.a.API_LOCATION+"institutions",a=new XMLHttpRequest;a.open("GET",e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=e.data;a&&(t.instOptions=a.map((function(e){return t.mapInstToOptions(e)})))}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(n){alert(n)}},getAdminsFromDb:function(){var t=this,e={instID:this.instIdSelected},a=De.stringify(e),n=y.a.API_LOCATION+"admins?"+a,i=new XMLHttpRequest;i.open("GET",n,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=e.data;a&&(t.adminOptions=a.map((function(e){return t.mapAdminToOptions(e)})))}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(s){alert(s)}}}},Fe=ke,Me=Object(h["a"])(Fe,Se,Ae,!1,null,null,null),Oe=Me.exports,Re=[{path:"/portal",name:"CCPortal",component:T,children:[{path:"/portal/cc-records",component:j},{path:"/portal/families/dashboard",component:q},{path:"/portal/wards/",component:K},{path:"/portal/families/add-family",component:nt},{path:"/portal/families/info",component:ct},{path:"/portal/admins",component:yt},{path:"/portal/profile",component:xt},{path:"/portal/settings",component:Rt}]},{path:"/mobile",name:"Mobile",component:he,children:[{path:"/mobile/home",component:Jt},{path:"/mobile/activate",component:oe},{path:"/mobile/login",component:ee}]},{path:"/super-admin/add-institution",name:"AddInstitution",component:ye},{path:"/super-admin/add-admin",name:"AddAdmin",component:xe},{path:"/super-admin/redirect",name:"RedirectCCPortal",component:Oe}],Ne=Re;i["default"].config.productionTip=!1,i["default"].use(o["a"]),i["default"].use(l["a"]),i["default"].use(s["a"]);var Pe=new l["a"]({routes:Ne,mode:"history"}),je=new r["a"]({storage:window.sessionStorage}),Ee=new s["a"].Store({state:{activeUser:null,institution:null,loggedInFamily:null,loggedInMemberID:"",loggedInMember:null,loadedFamily:null},mutations:{setActiveUser:function(t,e){t.activeUser=e},setInstitution:function(t,e){t.institution=e},setLoadedFamily:function(t,e){t.loadedFamily=e},setLoggedInFamily:function(t,e){t.loggedInFamily=e},setLoggedInMemberID:function(t,e){t.loggedInMemberID=e},setLoggedInMember:function(t,e){t.loggedInMember=e},resetLoadedFamily:function(t){t.loadedFamily=null},resetLoggedInFamily:function(t){t.loggedInFamily=null},resetLoggedInMemberID:function(t){t.loggedInMemberID=""},resetLoggedInMember:function(t){t.loggedInMember=null}},plugins:[je.plugin]});new i["default"]({router:Pe,store:Ee,render:function(t){return t(f)}}).$mount("#app")},"85ec":function(t,e,a){},a712:function(t,e,a){},f121:function(t,e){t.exports={API_LOCATION:"http://192.168.30.1:8000/api/",FRAS_USERNAME:"Fras User1"}}});
//# sourceMappingURL=app.cd93070c.js.map